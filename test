bc 4
01:
VErpepLezNP0xt383CQz43LYV8Q6VHkDlLusjClOAaTA6iqdAVSXgKDzH
rAzBBuMSP388G9DwNwK0mSlSf6MMvKwv9X6ifB9NXkFI-yhSKe35vk6TN
r6q6Ih08wIa6rxoaTrKwiJQaqg7tvvE46qCyRNr+hAQyR0k0C9tKU4jke
kSn-UbZs9HrYW6wuvvMrg6oMz3lsjzkfrTxbtS0YguB2KE8q7IlKUWu7X
0wusjjKvmRn5s3Kz+gmycL8mXlEUa-5ZXdZBISbKP4JSL-VOcgZYY8lxu
f3clex3A7nrBHkFAPkCMuXGugr0YrlbN9593ACO4MvOj3BWJy94c2vBA+

bc 3
1:
7Ga+O4EDJshK97jKYYGsxL37J3tVaCBjygk4tKLCnZKwSUPp1ipbKzRiO
9oPSurXQQZ7Mpeo5neTXJESU0dvCjQDKG8ugD66N+hr-vy+KZiaHQ+wKW
BaloIJlucyiDIGuWTzWXjDlZf6Q4BlB3ubm5cLSk0QrKCtLYMOBhh42Z2

2:
rssAPVg2OpBjDVo3E0DhGWrjPIq0hsTSuNz13wTuzVHfb2mRgO9bZKn9B
l42D5YEyMSYPXsxzcb08dqbRlbzWNJzJXE6YVapYW7f+tRRXRFI4yn4Nj
jZ0RiiqGRCTVzwComUcXB-eiFWRBY6JpSsCNkmIxL5KsRCo442djHhTZE



@echo off
:begin
set /p var_branch=请输入同步的分支编号：

git remote remove main
git remote prune origin

set remote_branch=remotes/main/%var_branch%
set local_branch=remotes/origin/%var_branch%
set remote_branch_exists=0
set local_branch_exists=0

for /f  %%i in ('git branch -a') do ( 
    setlocal enabledelayedexpansion
    set curr_branch=%%i
    if !curr_branch!==%local_branch% (
        set "local_branch_exists=1"
    )
)

if !local_branch_exists! equ 1  (
        echo 分支已经存在，直接执行 "git checkout 分支名称" 即可!!
        goto :end
    )

for /f "tokens=6 delims=./" %%j in ('git remote -v') do (
    setlocal enabledelayedexpansion
    set project=%%j

    set git_addr=ssh://git@github.com/hotho/!project!.git
    echo !git_addr!

    git remote add main !git_addr! 
    git fetch main -v  
    

    ::检查输入的分支编号，是否正确
    set target_branch=%var_branch%
    for /f  %%k in ('git branch -a') do ( 
        setlocal enabledelayedexpansion
        set curr_branch2=%%k

        if !curr_branch2!==%remote_branch% (
            set "remote_branch_exists=1"
        )

    )
    
    goto :checkout
)

:checkout
if !remote_branch_exists! equ 0  (
        echo 分支名称不正确，请检查分支名称!!
        git remote remove main
        goto :end
    )

    git branch %var_branch% main/%var_branch%
    git checkout %var_branch%
    git pull main %var_branch%
    git push origin %var_branch%
    git remote remove main

    goto :end
    
:end
    pause
    @popd
    @endlocal
    @echo on
